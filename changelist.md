## mbplugin 0.99.01 (02.06.20) Первая публичная бета

## mbplugin 0.99.02 (07.06.20) Сборка от 07.06.2020
Новые плагины
usd - Курс доллара с RBC
eur - Курс евро с RBC
financeyahoo - Курс ценных бумаг с finance.yahoo.com
moex - Курс ценных бумаг с moex.com
stock - Рассчет цены портфеля ценных бумаг
sipnet - Sipnet (IP телефония)

## mbplugin 0.99.03 (08.06.20) fix avtodor-tr.py
avtodor-tr - Автодор транспондер

## mbplugin 0.99.04 (09.06.20) Relative path 

## mbplugin 0.99.05 (16.06.20) jsmb localhost plugin
Самое важное изменение - это jsmb плагины через локальный web server (см readme.md)
1. Теперь mbplugin не привязан к папке c:\mbplugin а может быть установлен в любую папку, приоритетный вариант - распаковать содержимое в папку где лежит MobileBalance, важно помнить, что при перемещении mbplugin в другую папку необходимо пересобрать dll плагины (это несложно, всего лишь запустить mbplugin\dllsource\compile_all_p.bat, но без этого работать не будет)
2. Добавлен режим работы через webserver и jsmb плагин, работающий через этот webserver - несмотря на недостаток, в виде большей зависимости от IE, этот вариант дает прикольную плюшку в виде того, что гораздо больше полей из результата попадают в mobilebalance, из наиболее заметного - это список услуг и количество SMS (в этом смысле немного печалит, что мозговой штурм на DLL плагины оказался немного напрасным, т.е. кроме опыта дебагинга DLL от него практической позьзы получаетяс немного). Посмотрим, если вариант jsmbLH плагины себя хорошо покажут, то объявим это т вариант майнстримом.
3. Добавлен режим сохранения запросов через mbplugin в базу sqlite и построением результата в виде html странички.
4. Теперь настройки лежат в файле mbplugin.ini, если вы распаковали mbplugin в папку с mobilebalance, то после запуски mbplugin\setup_and_check.bat ищите mbplugin.ini в папке где лежит mobilebalance.
5. В перспективе я расчитываю, что mbplugin перенесет в себя основной функционал MobileBalance и станет самостоятельным приложением, ближайшие планы - импорт данный из mdb базы MobileBalance и собственное расписание запросов. Размышляю над собственной реализацией jsmb плагинов, но пока не придумал как это можно реализовать. Также хочу отметить, что против опсосов у нас богатый арсенал - selenium, headless chrome, ML и много чего интересного.
Подробное описание в readme.md, исправления приветсвуются в виде pull request в github, если с этим сложности - пишите в понятном вам варианте, оптимальный вариант замечаний - такой, который я смогу у себя повторить - такие имеют шанс быть обработаны максимально быстро.

## mbplugin 0.99.06 (18.06.20) add UslugiOn to tele2 and beeline and fix web server

## mbplugin 0.99.07 (25.06.20) jsmb localhost plugin installer

## mbplugin 0.99.08 (28.06.20) danycom provider
Наконец приехала симка Danycom. Встречайте - новая версия MBplugin с поддержкой Danycom так же много кого еще (у меня все операторы работают через mbplugin, стабильность работы MobileBalance поразительная) 

## mbplugin 0.99.09 (05.07.20) Add yota and onlime
В версии
* Новые плагины yota и onlime
* Исправлена проблема с русскими буквами и спецсимволами в пароле
* Для групповых тарифов МТС сделана возможность переключить просмотр остатков интернета и СМС / использовано интернета и СМС;

## mbplugin 0.99.10 (09.07.20) Telegram bot
В этой версии
* Телеграм бот

## mbplugin 0.99.11 (10.07.20) Telegram bot over MobileBalance web server
Сегодня подумал и сделал еще один вариант бота (версия 0.99.11)
В этом варианте бот берет данные непосредственно из MobileBalance, так что в боте будут все балансы которые есть в MobileBalance, без дополнительных усилий.
Т.е. вы можете все данные получать обычными плагинами, и видеть их в телеграм боте настроенном через второй вариант бота.
Как обычно версия mbplugin лежит (ссылку на дистрибутив ищите в шапке)
В этой версии
* ДВА варианта Телеграм бота

## mbplugin 0.99.12 (19.07.20) Small change
В этой версии только небольшие изменения
* исправления Danycom (иногда не возвращал значения)
* исправления parking_mos (не удерживал сессию, из-за чего начинали приходить в почту уведомления о заходе в личный кабинет с нового устройства)
* добавил в TG бота выдачу на сколько изменился баланс с прошлого запроса, это можно было и раньше сделать руками через ini, просто я сделал такой вариант по умолчанию (для того чтобы заработало нужно перезапустить вебсервер)

## mbplugin 0.99.14 (12.08.20) mts2 plugin on puppeteer
В этой версии альтернативный плагин для mts - mts2, который открывает браузер и получает баланс через него.
Плагин экспериментальный, поэтому не исключено что с ним могут возникнуть проблемы (у меня на 10+ МТС номеров работает нормально)
Если у вас предыдущая версия mbplugin.0.99.12 то можете обновить только содержимое папки plugin, если более старая, то обновляйте еще папку python или всю папку mbplugin целиком.
После обновления обязательно запустите setup_and_check.bat
После обновления можно файлом mts2.py заменить файл mts.py, и тогда все телефоны МТС будут обновляться новым плагином, либо подключить mts2 и поменять его в настройках телефона в mobilebalance как новый плагин.
* MTS2 - новый плагин для mts через открытие браузера (через puppeteer)

## mbplugin 0.99.15 (17.08.20) show and hide puppeteer
* Главное - научился запускать хром скрытым окном (при запуске на долю секунды появляется в трее окно хрома, но это уже точно не лечиться)
    * Окно с хромом показывается всегда в DEBUG режиме (logginglevel = DEBUG) или можно включить в ini show_chrome = 1
    * Также можно в любой момент сделать окно хрома видимым запустив mbplugin\plugin\show_chrome.bat
* Можно смотреть лог mbplugin через браузер (http://localhost:19777/log?lines=40) также можно открыть через иконку в трее
* Добавил по просьбе dimon_s2020 возможность скрыть иконку в трее (в mbplugin.ini в разделе Options добавить show_tray_icon=0)
* Если в процессе обнаруживается капча, то окно браузера делается видимым и минуту ожидается ввод капчи
* У меня есть МТС симка, которая находится не у меня и нет возможности поменять на ней пароль, но она привязана в личном кабинете к моей.
    * MTS2 умеет заходить в ЛК на один номер и забирать баланс с привязанного к нему номера, для этого в поле логин номер пишем в виде 9161234567/9177654321 где 
        * 9161234567 это номер от которого получаем баланс
        * 9177654321 это номер в ЛК которого заходим и пароль соответственно указываем от него
    * У меня вроде работает, но решение спорное, если кому-то такое нужно попробуйте.
* Плагин для ростелеком (https://lk.rt.ru) если у вас в личном кабинете как у меня несколько лицевых счетов, то можно указать логин/лицевой_счет, если один то можно просто указать логин
+ Код MTS2 пока выглядит ужасно - это такой франкенштейн из моих экспериментов, устаканится - тогда облагорожу, ростелеком уже написан более аккуратно, так что если соберетесь делать что-то свое за основу есть смысл брать ростелеком.

## mbplugin 0.99.16 (17.08.20) show and hide puppeteer
Исправил установку с нуля (в прошлой 14й версии умудрился ее сломать)
Починил фантомные окна (теперь не должны появляться) а также исправвил по настройкам показывать/не показывать Chrome

## mbplugin 0.99.17 (25.08.20) fix Unknown in tg bot
Исправил выдачу информации в Телеграм боте (лишние строчки с Unknown).
Убрал из сборки не работающий плагин mts (для МТС используйте плагин mts2)

## mbplugin 0.99.18 (30.08.20) add proxy for tg bot and subscription
Много изменений по коду обновлять всю папку plugin целиком  
Добавил возможность работы телеграм бота через проки  
Добавил подписки для бота - возможность отправлять информацию по указаным фильтрам номеров

## mbplugin 0.99.19 (03.09.20) fix mts2
Исправлена работа провайдера для MTS (двухэтапное окно логина, сначала логин, потом пароль)  
Добавлены дополнительные настройки для телеграм подписок, например можно указать send_empty:0 индивидуально для каждой подписки  
Много изменений по коду обновлять всю папку plugin целиком

## mbplugin 0.99.20 (14.09.20) add a1.by
Небольшие правки в модуле по работе с puppeteer  
Добавлен тестовый плагин test3 для тестирования puppeteer chrome (Его так же можно брать за основу)  
Добавлен оператор a1.by (сотовая связь Беларусь) Автор плагина Exemok  
